<!DOCTYPE html>
<html>

<head>
  <title>Socket.IO</title>
  <script src="/socket.io/socket.io.js"></script>
</head>

<body>
  <ul id="mensagens"></ul>
  <form action="">
    <input id="mensagemInput" autocomplete="off" /><button>Send</button>
  </form>
  <script>
    const socket = io();
    const form = document.querySelector('form');
    const inputMessage = document.querySelector('#mensagemInput');
    form.addEventListener('submit', (e) => {
      e.preventDefault();
      socket.emit('message', {
        nickname: '1',
        chatMessage: inputMessage.value,
      });
      inputMessage.value = ''
      return false;
    });
    const createMessage = (message) => {
      const messagesUl = document.querySelector('#mensagens');
      const li = document.createElement('li');
      li.innerText = message;
      messagesUl.appendChild(li);
    };
    socket.on('ola', (mensagem) => createMessage(mensagem));
    socket.on('message', (objeto) => createMessage(objeto.mensagem));
  </script>
</body>

</html>
